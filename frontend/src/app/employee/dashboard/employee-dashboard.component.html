<div class="dashboard-wrapper">
  <div class="dashboard-card">

    <h2 class="title">Employee Dashboard</h2>

    <!-- âœ… SHOW ONLY AFTER USER LOADS -->
    <ng-container *ngIf="user as u">

      <div class="info-row">
        <strong>Name:</strong> {{ u.fullName }}
      </div>

      <div class="info-row">
        <strong>Email:</strong> {{ u.email }}
      </div>

      <div class="info-row">
        <strong>Department:</strong> {{ u.department }}
      </div>

      <!-- Department -->
      <label>Change Department</label>
      <select [(ngModel)]="selectedDepartment" name="department">
        <option value="">Select department</option>
        <option value="IDIS">IDIS</option>
        <option value="VEDC">VEDC</option>
        <option value="EMRI">EMRI</option>
        <option value="GUSS">GUSS</option>
        <option value="EMSS">EMSS</option>
      </select>

      <!-- Month & Year -->
      <div class="row">
        <div class="form-group">
          <label>Month</label>
          <select [(ngModel)]="selectedMonth" (change)="onMonthOrYearChange()">
            <option value="">Select Month</option>
            <option *ngFor="let m of months" [value]="m.value">
              {{ m.label }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Year</label>
          <select [(ngModel)]="selectedYear" (change)="onMonthOrYearChange()">
            <option value="">Select Year</option>
            <option *ngFor="let y of years" [value]="y">
              {{ y }}
            </option>
          </select>
        </div>
      </div>

      <!-- Days -->
      <div class="form-group">
        <label>Days in Selected Month</label>
        <input type="number" [value]="daysInMonth" disabled />
      </div>

      <div class="form-group">
        <label>Working Days</label>
        <input
          type="number"
          [(ngModel)]="workingDays"
          (input)="validateWorkingDays()"
        />
        <small *ngIf="showError" style="color:red">
          Working days cannot exceed total days
        </small>
      </div>

      <!-- Buttons -->
      <button
        class="btn primary"
        [disabled]="!isFormValid()"
        (click)="submit()"
      >
        Submit
      </button>

      <button class="btn danger" (click)="logout()">
        Logout
      </button>

    </ng-container>

    <!-- Optional loading text -->
    <div *ngIf="!user" class="loading">
      Loading employee details...
    </div>

  </div>
</div>
